<head>
  <title>sites-meteor</title>
</head>

<body>
  {{> table}}
  <br/>
  {{> show}}
</body>

<template name="table">
    <table id="replace" class="main">
        <thead>
            <tr>
                <th class="site">
                    <a href="{{git_web}}" title="Repositories">Site</a>
                </th>
                {{#each environment}}
                    {{> env_head}}
                {{/each}}
            </tr>
        </thead>
        {{#each group}}
            {{> group}}
        {{/each}}
    </table>
</template>

<template name="env_head">
    <th class="{{state}}">{{label}}</th>
</template>

<template name="group">
    <tbody>
        <tr>
            <th id="group_{{name}}" class="group head {{ state }}" colspan="20">{{label}}</th>
        </tr>
        {{#each group}}
            {{> group_data}}
        {{/each}}
    </tbody>
</template>

<template name="group_data">
    <tr class="group-{{group}} {{display}}">
        <td>
            {{label}}
            <div class="right">[ {{> links}} ]</div>
        </td>
        {{#each environment}}
            {{> group_env}}
        {{/each}}
    </tr>
</template>

<template name="group_env">
    <td class="env_{{name}} {{state}}">
        {{> links}}
    </td>
</template>

<template name="links">
{{#each links}}
    <a href="{{url}}" title="{{name}}">{{label}}</a> {{pipe}}
{{/each}}
</template>

<template name="show">
    <table class="">
        <tr>
            <th>Show:</th>
            {{#each environments}}
            <td class="display {{name}} note {{state}}" title="Click to display {{name}} links">{{label}}</td>
            {{/each}}
        </tr>
    </table>
</template>

<template name="roup_env">
</template>
