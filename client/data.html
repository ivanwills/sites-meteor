
<template name="table">
    <table id="replace" class="table table-striped table-hover table-bordered table-condensed">
        <thead>
            <tr>
                <th class="site">
                    <a href="{{ git_web }}" title="Repositories">Site</a>
                </th>
                {{#each environment }}
                    {{> env_head }}
                {{/each }}
            </tr>
        </thead>
        {{#each group }}
            {{> group }}
        {{/each }}
    </table>
</template>

<template name="env_head">
    <th class="env {{ state }}" title="{{ action }} {{ name }}">{{ label }}</th>
</template>

<template name="group">
    <tbody>
        <tr>
            <th id="group_{{ name }}" class="group head {{ state }}" title="{{ action }} {{ name }}" colspan="{{ colspan }}">{{ label }}</th>
        </tr>
        {{#each group }}
            {{> group_data }}
        {{/each }}
    </tbody>
</template>

<template name="group_data">
    <tr class="group-{{ group }} {{ display }}">
        <td>
            <p class="pull-left">{{{ label }}}</p>
            {{#if loggedin }}
                {{> edit }}
            {{/if }}
            {{#if links }}
                <div class="pull-right">[ {{> links }} ]</div>
            {{/if }}
        </td>
        {{#each environment }}
            {{> group_env }}
        {{/each }}
    </tr>
</template>

<template name="group_env">
    <td class="env {{ name }} {{ state }}">
        {{> links }}
    </td>
</template>

<template name="edit">
    <div class="edit pull-left"><a href="#" title="Edit {{ name }}'s data">Edit</a></div>
</template>

